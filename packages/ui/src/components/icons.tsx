import { type Gradient, appConfig } from "@config/ui";
import { cn } from "@ui/utils";
import { useTheme } from "next-themes";

export type IconProps = React.HTMLAttributes<SVGElement>;
import { RotatingLines, type RotatingLinesProps } from "./loaders/rotating-lines";
import { Spinner, type SpinnerProps } from "./loaders/spinner";
import { WavyBubbles, type WavyBubblesProps } from "./loaders/wavy-bubbles";

export const Icons = {
  logo: (props: IconProps) => (
    <svg viewBox="0 0 512 512" fill="currentColor" stroke="none" xmlns="http://www.w3.org/2000/svg" {...props}>
      <title>{appConfig.title}</title>
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M235.044 0.28136C230.279 0.664008 226.377 1.47714 226.374 2.08893C226.369 2.70072 228.445 11.8643 230.986 22.4527L235.605 41.7041L235.078 69.1714L234.55 96.6387L230.068 109.987C223.33 130.058 219.887 138.14 214.535 146.443C211.865 150.587 208.416 156.461 206.873 159.496C200.837 171.371 178.147 194.624 160.007 207.53C147.391 216.503 119.789 228.089 101.042 232.281C85.152 235.833 61.7171 237.074 44.2696 235.286C31.8508 234.014 10.2327 229.224 8.32327 227.321C7.71951 226.719 5.86026 226.227 4.19072 226.227C1.28578 226.227 1.12396 226.529 0.445429 233.18C0.0559453 237.004 -0.110339 250.143 0.0771494 262.379L0.418645 284.626L4.3771 284.519C6.5533 284.46 13.8352 282.731 20.5591 280.678L32.7826 276.943L63.4726 276.892C94.0331 276.839 94.2095 276.853 105.323 280.043C126.999 286.264 147.894 296.153 164.859 308.22C181.752 320.234 204.786 345.775 214.506 363.268C220.685 374.387 228.327 393.737 231.552 406.428C234.125 416.554 234.592 421.068 235.061 440.355C235.69 466.211 234.357 479.65 229.556 495.85C224.574 512.656 223.293 511.482 247.055 511.891C273.022 512.337 285.557 511.417 285.557 509.066C285.557 508.118 284.07 502.532 282.254 496.652C275.112 473.532 273.419 439.348 278.265 416.132C281.676 399.79 288.898 378.445 294.719 367.496C302.991 351.938 319.574 331.091 332.914 319.482C356.055 299.343 373.543 290.052 407.2 280.008C417.762 276.858 417.92 276.846 448.492 276.902C474.045 276.948 480.21 277.273 485.32 278.84C497.826 282.676 509.904 285.522 510.623 284.804C511.745 283.686 512.507 244.41 511.595 234.715C510.664 224.797 511.144 224.999 498.154 229.033C480.785 234.427 471.963 235.541 446.818 235.513C420.657 235.486 413.991 234.503 393.808 227.702C349.741 212.856 317.143 184.728 294.124 141.689C291.342 136.489 286.566 124.668 283.512 115.42C278.827 101.237 277.746 96.3294 276.606 84.0613C274.595 62.4005 275.579 41.4672 279.286 27.1168C280.945 20.693 283.337 12.2769 284.602 8.41375C285.867 4.55056 286.725 1.22352 286.508 1.01885C285.673 0.22908 243.258 -0.379376 235.044 0.28136ZM181.769 10.3515C163.974 15.2436 158.333 17.3392 158.333 19.0545C158.333 20.0078 160.154 26.3415 162.38 33.129C172.056 62.6341 167.315 96.4017 150.041 120.999C143.575 130.208 131.949 142.746 124.853 148.165C119.977 151.888 103.771 159.509 93.2095 163.045C83.3876 166.333 82.2861 166.461 64.0306 166.435C46.7683 166.411 44.1033 166.135 34.4566 163.381C28.6255 161.716 23.3781 159.908 22.7944 159.363C20.4921 157.215 18.2077 158.548 16.3786 163.106C12.7527 172.143 8.90359 185.658 8.56879 190.538L8.23064 195.449L18.8326 199.19C36.3237 205.36 61.9939 207.685 83.5896 205.053C118.087 200.849 151.513 182.312 173.274 155.315C186.548 138.847 190.226 132.357 197.949 111.778C204.947 93.1336 206.759 81.1336 206.021 58.3149C205.411 39.4027 204.937 36.9244 197.722 14.881C195.916 9.36592 195.388 8.74301 192.371 8.56058C190.529 8.44823 185.758 9.25469 181.769 10.3515ZM315.059 12.2658C313.336 16.2147 311.509 22.2914 307.265 38.1958C305.021 46.6085 305.107 75.1592 307.417 88.5741C309.578 101.124 314.484 115.9 320.436 127.784C333.33 153.535 358.906 179.681 382.563 191.297C393.853 196.841 416.556 203.827 427.846 205.231C438.667 206.577 465.236 205.866 474.718 203.976C482.965 202.333 501.315 197.132 502.731 196.036C504.53 194.642 502.856 185.786 498.106 171.58C493.313 157.242 494.2 157.59 476.309 163.013C465.362 166.33 463.651 166.536 447.376 166.512C429.79 166.484 427.339 166.112 411.106 160.996C394.619 155.799 372.491 138.105 361.225 121.108C350.995 105.678 344.754 84.3405 344.722 64.6975C344.702 52.7153 347.662 35.3849 351.284 26.2714C353.605 20.4294 353.606 20.416 351.389 18.2069C350.167 16.9889 348.477 15.9933 347.632 15.9933C346.787 15.9933 341.294 14.5205 335.425 12.7197C329.556 10.9188 322.994 9.11676 320.842 8.71408C317.12 8.01775 316.837 8.19239 315.059 12.2658ZM379.93 35.1947C378.065 38.0323 375.353 49.0857 374.273 58.2626C373.272 66.7587 376.336 84.4473 380.61 94.8255C383.687 102.305 385.441 104.641 395.373 114.494C408.02 127.041 415.094 131.575 427.266 134.936C438.654 138.078 455.408 138.078 467.836 134.934C472.849 133.665 477.392 132.198 477.932 131.674C479.778 129.882 462.335 101.177 458.702 100.028C457.572 99.6709 452.094 98.959 446.526 98.4473C434.905 97.3784 429.231 94.721 422.343 87.1225C415.612 79.6953 412.804 72.5007 412.792 62.6464C412.785 57.6163 412.22 53.5307 411.385 52.4773C410.619 51.5084 405.22 47.6018 399.388 43.7943C393.557 39.9867 387.426 35.9288 385.762 34.7753C381.974 32.1491 381.93 32.1524 379.93 35.1947ZM125.515 34.7342C125.194 35.2525 121.72 37.5484 117.796 39.8354C113.871 42.1235 107.905 46.1502 104.538 48.7854L98.4146 53.5752L97.7628 63.6085C96.3767 84.9289 85.2502 96.6464 65.1466 97.9612C60.85 98.2416 55.9742 98.9868 54.3114 99.6175C50.1844 101.183 32.2246 126.159 32.2246 130.333C32.2246 132.871 46.9145 136.324 60.1246 136.89C82.4312 137.847 96.7551 133.142 111.41 120.044C125.406 107.534 129.443 101.629 133.879 87.1703C135.851 80.7432 136.45 76.0468 136.502 66.6052C136.586 51.4784 134.472 37.1079 131.878 35.1813C129.73 33.5851 126.374 33.3493 125.515 34.7342ZM259.932 160.703C262.653 167.251 273.233 184.052 280.379 193.174C290.591 206.208 313.816 228.243 326.055 236.507C337.724 244.385 349.606 251.56 353.435 253.041C357.703 254.69 355.823 257.293 346.936 262.044C337.002 267.354 319.424 279.28 309.298 287.579C293.709 300.355 273.163 326.102 261.584 347.37C259.117 351.902 256.596 355.65 255.983 355.699C255.369 355.748 252.607 351.779 249.845 346.88C241.971 332.911 239.976 329.992 228.577 315.772C212.514 295.734 194.127 279.691 171.977 266.391C162.35 260.61 157.679 257.156 157.475 255.671C157.239 253.938 159.189 252.44 166.804 248.502C186.681 238.225 205.708 222.538 225.832 199.832C233.208 191.51 245.081 174.172 254.007 158.688C255.788 155.597 258.142 156.397 259.932 160.703ZM36.8962 307.493C21.9284 310.438 8.84891 315.218 8.1369 318.003C7.43605 320.747 16.0058 349.583 18.1608 351.73C19.4922 353.058 20.597 352.954 25.7954 351.015C47.8118 342.804 76.0856 342.366 98.0206 349.895C124.86 359.109 148.065 380.687 159.05 406.649C166.562 424.4 169.373 444.17 166.704 460.473C164.379 474.68 161.965 483.257 159.243 486.983L156.872 490.229L159.829 492.765C163.184 495.642 186.123 503.202 191.493 503.202C195.703 503.202 195.86 502.981 199.763 491.556C205.924 473.522 208.231 441.137 204.602 423.625C196.602 385.023 179.501 357.478 148.854 333.833C118.517 310.427 74.5567 300.084 36.8962 307.493ZM421.708 307.461C415.877 308.557 405.582 311.535 398.83 314.08C368.116 325.656 347.088 341.918 329.917 367.377C319.155 383.335 314.254 394.804 308.394 417.753C306.038 426.981 305.644 431.062 305.644 446.276C305.644 466.145 307.789 479.761 313.209 494.304C315.716 501.032 316.816 502.717 318.888 503.014C321.392 503.373 351.104 494.834 352.821 493.263C353.295 492.828 352.929 490.675 352.009 488.477C351.087 486.279 349.067 479.138 347.519 472.608C343.691 456.459 343.661 440.888 347.426 424.437C352.227 403.47 357.474 393.555 372.481 377.088C382.22 366.399 388.05 361.874 400.132 355.627C411.998 349.49 421.76 346.824 438.473 345.155C454.205 343.586 467.564 344.915 480.51 349.341C484.923 350.849 489.898 351.922 491.567 351.725C494.406 351.39 494.844 350.549 498.421 338.575C500.523 331.539 502.631 324.531 503.105 323.002C504.815 317.491 503.251 316.223 489.148 311.685C481.826 309.328 472.57 306.915 468.58 306.323C457.239 304.642 433.673 305.214 421.708 307.461ZM49.5226 375.875C45.8398 376.711 40.9328 377.735 38.6171 378.152C36.3014 378.57 34.1196 379.375 33.7692 379.941C32.5081 381.974 34.5548 386.329 41.8412 397.124C52.8784 413.476 51.8495 412.716 63.8063 413.345C85.6107 414.49 95.5888 424.822 98.0094 448.756C98.6701 455.281 99.5138 458.401 101.009 459.849C103.413 462.173 128.155 478.74 129.186 478.714C131.446 478.657 132.679 475.907 134.778 466.236C138.839 447.527 137.43 432.015 130.258 416.509C122.523 399.786 112.851 389.957 95.5911 381.282C89.8548 378.399 85.2848 377.12 76.1459 375.842C61.9783 373.86 58.3915 373.864 49.5226 375.875ZM436.216 374.946C428.318 376.284 416.003 380.337 410.66 383.356C403.018 387.673 390.556 399.346 385.947 406.505C383.997 409.535 380.886 415.887 379.035 420.623C376.089 428.157 375.599 431.037 375.104 443.7C374.623 456.053 374.89 459.545 376.93 467.585C379.939 479.445 381.126 480.806 385.471 477.379C387.243 475.981 393.987 471.334 400.458 467.051L412.222 459.265L412.939 449.13C414.035 433.612 418.81 425.116 430.718 417.499C435.71 414.307 437.512 413.835 447.347 413.156C453.414 412.736 459.098 411.797 459.978 411.069C460.859 410.34 463.491 406.62 465.826 402.803C468.162 398.984 471.544 393.975 473.341 391.671C475.139 389.366 476.863 385.597 477.174 383.295L477.736 379.11L465.067 376.627C453.423 374.346 443.252 373.753 436.216 374.946Z"
        fill="currentColor"
      />
    </svg>
  ),
  spinner: (props: SpinnerProps) => <Spinner {...props} />,
  rotatingLines: (props: RotatingLinesProps) => <RotatingLines {...props} />,
  wavyBubbles: (props: WavyBubblesProps) => <WavyBubbles {...props} />,
};

export interface AppIconProps extends React.HTMLAttributes<HTMLDivElement> {
  Icon: (props: IconProps) => JSX.Element;
  gradient: Gradient;
  iconClassName?: string;
}

export function AppIcon({ Icon, gradient, iconClassName, className, ...props }: AppIconProps) {
  const { theme } = useTheme();
  const mesh = theme === "dark" ? gradient.dark.mesh : gradient.light.mesh;
  const bg = theme === "dark" ? gradient.dark.bg.split(",")[1] : gradient.light.bg.split(",")[1];
  return (
    <div className="group/icon relative">
      <div
        className={cn(
          "relative w-14 h-14 rounded-xl border border-black/5 dark:border-white/5 bg-white/20 dark:bg-black/40 shadow-md backdrop-blur-xl overflow-hidden",
          className,
        )}
        {...props}
      >
        <div className="absolute inset-0 opacity-70 dark:opacity-60" style={{ background: mesh }} />
        <div className="absolute inset-0 bg-white/40 dark:bg-black/30 backdrop-blur-sm" />
        <div className="absolute inset-1 rounded-xl bg-gradient-to-br from-white/80 to-white/20 dark:from-black/60 dark:to-black/40 shadow-inner" />
        <div className="absolute inset-0 flex items-center justify-center">
          <Icon
            className={cn(
              "w-6 h-6 transform rotate-0 transition-transform duration-300 group-hover/icon:rotate-12 group-hover/icon:scale-110",
              iconClassName,
            )}
            style={{
              color: bg,
            }}
          />
        </div>
      </div>
    </div>
  );
}
